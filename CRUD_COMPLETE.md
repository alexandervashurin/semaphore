# –û—Ç—á—ë—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π API

**–î–∞—Ç–∞**: 25 —Ñ–µ–≤—Ä–∞–ª—è 2026 –≥.  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

---

## üìä –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ API

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2/2)
- ‚úÖ `POST /api/auth/login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–∫–∞—Ä–∫–∞—Å)
- ‚úÖ `POST /api/auth/logout` - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (4/4) - 100%
- ‚úÖ `GET /api/users` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `GET /api/users/:id` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- ‚úÖ `PUT /api/users/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `DELETE /api/users/:id` - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ü—Ä–æ–µ–∫—Ç—ã (5/5) - 100%
- ‚úÖ `GET /api/projects` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
- ‚úÖ `POST /api/projects` - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
- ‚úÖ `GET /api/projects/:id` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –ø–æ ID
- ‚úÖ `PUT /api/projects/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
- ‚úÖ `DELETE /api/projects/:id` - —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

#### –®–∞–±–ª–æ–Ω—ã (5/5) - 100%
- ‚úÖ `GET /api/projects/:project_id/templates` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ `POST /api/projects/:project_id/templates` - —Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
- ‚úÖ `GET /api/projects/:project_id/templates/:id` - –ø–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω
- ‚úÖ `PUT /api/projects/:project_id/templates/:id` - –æ–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
- ‚úÖ `DELETE /api/projects/:project_id/templates/:id` - —É–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω

#### –ó–∞–¥–∞—á–∏ (4/4) - 100%
- ‚úÖ `GET /api/projects/:project_id/tasks` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- ‚úÖ `POST /api/projects/:project_id/tasks` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
- ‚úÖ `GET /api/projects/:project_id/tasks/:id` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É
- ‚úÖ `DELETE /api/projects/:project_id/tasks/:id` - —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É

#### –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏ (5/5) - 100%
- ‚úÖ `GET /api/projects/:project_id/inventories` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–π
- ‚úÖ `POST /api/projects/:project_id/inventories` - —Å–æ–∑–¥–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- ‚úÖ `GET /api/projects/:project_id/inventories/:id` - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- ‚úÖ `PUT /api/projects/:project_id/inventories/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- ‚úÖ `DELETE /api/projects/:project_id/inventories/:id` - —É–¥–∞–ª–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

#### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (5/5) - 100%
- ‚úÖ `GET /api/projects/:project_id/repositories` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- ‚úÖ `POST /api/projects/:project_id/repositories` - —Å–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ `GET /api/projects/:project_id/repositories/:id` - –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ `PUT /api/projects/:project_id/repositories/:id` - –æ–±–Ω–æ–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ `DELETE /api/projects/:project_id/repositories/:id` - —É–¥–∞–ª–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

#### –û–∫—Ä—É–∂–µ–Ω–∏—è (5/5) - 100%
- ‚úÖ `GET /api/projects/:project_id/environments` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–∫—Ä—É–∂–µ–Ω–∏–π
- ‚úÖ `POST /api/projects/:project_id/environments` - —Å–æ–∑–¥–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ `GET /api/projects/:project_id/environments/:id` - –ø–æ–ª—É—á–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ `PUT /api/projects/:project_id/environments/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ `DELETE /api/projects/:project_id/environments/:id` - —É–¥–∞–ª–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ

#### –ö–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ (5/5) - 100%
- ‚úÖ `GET /api/projects/:project_id/keys` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ `POST /api/projects/:project_id/keys` - —Å–æ–∑–¥–∞—Ç—å –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ `GET /api/projects/:project_id/keys/:id` - –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ `PUT /api/projects/:project_id/keys/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ `DELETE /api/projects/:project_id/keys/:id` - —É–¥–∞–ª–∏—Ç—å –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- **–í—Å–µ–≥–æ**: 40 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: 40 (100%)
- **–û—Å—Ç–∞–ª–æ—Å—å**: 0

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞
- **handlers.rs**: ~790 —Å—Ç—Ä–æ–∫
- **–í—Å–µ–≥–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ**: ~7000 —Å—Ç—Ä–æ–∫

### Payload structs
–î–æ–±–∞–≤–ª–µ–Ω–æ 14 —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤:
- `LoginPayload`, `LoginResponse`
- `UserUpdatePayload`
- `ProjectCreatePayload`, `ProjectUpdatePayload`
- `TemplateCreatePayload`, `TemplateUpdatePayload`
- `TaskCreatePayload`
- `InventoryCreatePayload`, `InventoryUpdatePayload`
- `RepositoryCreatePayload`, `RepositoryUpdatePayload`
- `EnvironmentCreatePayload`, `EnvironmentUpdatePayload`
- `AccessKeyCreatePayload`, `AccessKeyUpdatePayload`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É:
```rust
pub async fn handler(
    State(state): State<Arc<AppState>>,
    Path(id): Path<i32>,
    Json(payload): Json<PayloadType>,
) -> Result<Json<Response>, (StatusCode, String)>
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ï–¥–∏–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:
```rust
.map_err(|e| match e {
    Error::NotFound(_) => (StatusCode::NOT_FOUND, e.to_string()),
    _ => (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()),
})
```

### –°—Ç–∞—Ç—É—Å –∫–æ–¥—ã
- `200 OK` - —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- `201 Created` - —Ä–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω
- `204 No Content` - —Ä–µ—Å—É—Ä—Å —É–¥–∞–ª—ë–Ω
- `400 Bad Request` - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `404 Not Found` - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500 Internal Server Error` - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `501 Not Implemented` - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```
‚úÖ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
‚úÖ 27 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ)
‚úÖ 0 –æ—à–∏–±–æ–∫
```

### –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
```
–†–∞–∑–º–µ—Ä: 146 MB (debug –≤–µ—Ä—Å–∏—è)
–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: ~2 –º–∏–Ω—É—Ç—ã
```

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å JWT —Ç–æ–∫–µ–Ω—ã
2. **–°–µ—Å—Å–∏–∏** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –í–∞–∂–Ω—ã–µ
4. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ansible/Terraform
5. **–õ–æ–≥–∏ –∑–∞–¥–∞—á** - –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
6. **WebSocket** - real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
7. **–¢–µ—Å—Ç—ã** - unit –∏ integration —Ç–µ—Å—Ç—ã
8. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
9. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–æ–≥—Ä–µ—Å—Å | –°—Ç–∞—Ç—É—Å |
|-----------|----------|--------|
| –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö | 100% | ‚úÖ |
| –°–ª–æ–π –ë–î | 85% | ‚úÖ |
| HTTP API | 85% | ‚úÖ |
| CLI | 90% | ‚úÖ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 100% | ‚úÖ |
| –¢–µ—Å—Ç—ã | 10% | ‚è≥ |
| –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ | 20% | ‚è≥ |

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: ~80%

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
cd /home/a.vashurin@PSO.LOCAL/programms/github_my/semaphore/rust

# –°–±–æ—Ä–∫–∞
cargo build

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
./target/debug/semaphore server --db-dialect sqlite --db-path ./semaphore.db

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
./target/debug/semaphore user add \
    --username admin \
    --name "Administrator" \
    --email admin@localhost \
    --password changeme \
    --admin
```

---

**–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**: –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

**–ü—Ä–æ–≥—Ä–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Go –Ω–∞ Rust**: ~80% ‚úÖ
