# –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è db/sql/user.go –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Rust

**–î–∞—Ç–∞**: 2026-02-26  
**–°—Ç–∞—Ç—É—Å**: üìã –ü–ª–∞–Ω

---

## üìä –ü—Ä–æ–±–ª–µ–º–∞

–§–∞–π–ª `db/sql/user.go` —Å–æ–¥–µ—Ä–∂–∏—Ç **411 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞** –∏ –≤–∫–ª—é—á–∞–µ—Ç:
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è–º–∏
- TOTP –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ **3 –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª—è**:

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ (Go) | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|----------|
| `user_crud.rs` | ~250 | CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è User |
| `user_auth.rs` | ~100 | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø–∞—Ä–æ–ª–∏ |
| `user_totp.rs` | ~61 | TOTP –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è |
| **–ò–¢–û–ì–û** | **~411** | **–í 3 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ!** |

---

## üîÑ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Rust

### –≠—Ç–∞–ø 1: User CRUD (1-2 –¥–Ω—è)

**–§–∞–π–ª**: `rust/src/db/sql/user_crud.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] get_users() - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] get_user() - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ ID
- [ ] get_user_by_login_or_email() - –ø–æ–∏—Å–∫ –ø–æ login/email
- [ ] create_user() - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] update_user() - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- [ ] delete_user() - —É–¥–∞–ª–µ–Ω–∏–µ
- [ ] get_all_admins() - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- [ ] get_user_count() - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### –≠—Ç–∞–ø 2: User Auth (1 –¥–µ–Ω—å)

**–§–∞–π–ª**: `rust/src/db/sql/user_auth.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] set_user_password() - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è
- [ ] verify_user_password() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
- [ ] hash_password() - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è

---

### –≠—Ç–∞–ø 3: User TOTP (0.5 –¥–Ω—è)

**–§–∞–π–ª**: `rust/src/db/sql/user_totp.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] set_user_totp() - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ TOTP
- [ ] get_user_totp() - –ø–æ–ª—É—á–µ–Ω–∏–µ TOTP
- [ ] delete_user_totp() - —É–¥–∞–ª–µ–Ω–∏–µ TOTP

---

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç—ã (1 –¥–µ–Ω—å)

**–ó–∞–¥–∞—á–∏**:
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è CRUD
- [ ] Integration —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: Alexander Vashurin  
**–î–∞—Ç–∞**: 2026-02-26  
**–°—Ç–∞—Ç—É—Å**: üìã –ü–õ–ê–ù  
**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 3.5-4.5 –¥–Ω–µ–π
