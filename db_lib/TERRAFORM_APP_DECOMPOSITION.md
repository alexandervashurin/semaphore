# –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è TerraformApp.go –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Rust

**–î–∞—Ç–∞**: 2026-02-26  
**–°—Ç–∞—Ç—É—Å**: üìã –ü–ª–∞–Ω

---

## üìä –ü—Ä–æ–±–ª–µ–º–∞

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `TerraformApp.go` —Å–æ–¥–µ—Ä–∂–∏—Ç **392 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞** –∏ –≤–∫–ª—é—á–∞–µ—Ç:
- –°—Ç—Ä—É–∫—Ç—É—Ä—É TerraformApp
- terraformReader –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (init, plan, apply)
- –†–∞–±–æ—Ç—É —Å workspaces
- –û–±—Ä–∞–±–æ—Ç–∫—É –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ **6 –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π**:

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ (Go) | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|----------|
| `terraform_app_types.go` | ~70 | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ç–∏–ø—ã |
| `terraform_app_reader.go` | ~40 | terraformReader |
| `terraform_app_commands.go` | ~100 | –ö–æ–º–∞–Ω–¥—ã (init, plan, apply) |
| `terraform_app_workspaces.go` | ~60 | –†–∞–±–æ—Ç–∞ —Å workspaces |
| `terraform_app_install.go` | ~60 | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è |
| `terraform_app_utils.go` | ~62 | –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã |
| **–ò–¢–û–ì–û** | **~392** | **–í 6 —Ä–∞–∑ –º–µ–Ω—å—à–µ!** |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

### 1. terraform_app_types.go

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∏–ø—ã

**–§—É–Ω–∫—Ü–∏–∏**:
- `TerraformApp` struct - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `terraformReader` struct - —á–∏—Ç–∞—Ç–µ–ª—å –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–ª—è: Logger, Template, Repository, Inventory, Name, PlanHasNoChanges, backendFilename

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 
- `db.Template`, `db.Repository`, `db.Inventory`
- `task_logger.Logger`

---

### 2. terraform_app_reader.go

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- `Read()` - —á—Ç–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (WaitingConfirmation, Confirmed, Rejected)
- –í–æ–∑–≤—Ä–∞—Ç "yes"/"no" –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- `task_logger.TaskStatus`
- `time.Sleep`

---

### 3. terraform_app_commands.go

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ Terraform

**–§—É–Ω–∫—Ü–∏–∏**:
- `makeCmd()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã exec
- `runCmd()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `Plan()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ terraform plan
- `Apply()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ terraform apply
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- `os/exec.Cmd`
- `environmentVars`
- `args`

---

### 4. terraform_app_workspaces.go

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å workspaces

**–§—É–Ω–∫—Ü–∏–∏**:
- `isWorkspacesSupported()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ workspaces
- `selectWorkspace()` - –≤—ã–±–æ—Ä workspace
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ workspaces

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- `environmentVars`
- `runCmd()`

---

### 5. terraform_app_install.go

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

**–§—É–Ω–∫—Ü–∏–∏**:
- `init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Terraform
- `InstallRequirements()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `InstallRequirementsWithInitArgs()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ backend —Ñ–∞–π–ª–æ–≤

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- `LocalAppInstallingArgs`
- `AccessKeyInstaller`
- `db.TerraformTaskParams`

---

### 6. terraform_app_utils.go

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã

**–§—É–Ω–∫—Ü–∏–∏**:
- `GetFullPath()` - –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- `SetLogger()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
- `Clear()` - –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- `Run()` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –∑–∞–ø—É—Å–∫–∞

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- `util.Config`
- `LocalAppRunningArgs`

---

## üîÑ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Rust

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã (1 –¥–µ–Ω—å)

**–§–∞–π–ª**: `rust/src/services/executors/terraform/types.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `TerraformApp`
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `TerraformReader`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—è –∏ —Ç–∏–ø—ã

---

### –≠—Ç–∞–ø 2: Reader (1 –¥–µ–Ω—å)

**–§–∞–π–ª**: `rust/src/services/executors/terraform/reader.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Read()` trait
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- [ ] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

### –≠—Ç–∞–ø 3: Commands (2 –¥–Ω—è)

**–§–∞–π–ª**: `rust/src/services/executors/terraform/commands.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `make_cmd()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `run_cmd()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Plan()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Apply()`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `tokio::process::Command`

---

### –≠—Ç–∞–ø 4: Workspaces (1 –¥–µ–Ω—å)

**–§–∞–π–ª**: `rust/src/services/executors/terraform/workspaces.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `is_workspaces_supported()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `select_workspace()`
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

### –≠—Ç–∞–ø 5: Install (1-2 –¥–Ω—è)

**–§–∞–π–ª**: `rust/src/services/executors/terraform/install.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `init()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `install_requirements()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `install_requirements_with_init_args()`
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ backend —Ñ–∞–π–ª–æ–≤

---

### –≠—Ç–∞–ø 6: Utils (1 –¥–µ–Ω—å)

**–§–∞–π–ª**: `rust/src/services/executors/terraform/utils.rs`

**–ó–∞–¥–∞—á–∏**:
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_full_path()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `set_logger()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `clear()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `run()`

---

### –≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3-4 –¥–Ω—è)

**–ó–∞–¥–∞—á–∏**:
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- [ ] Integration —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º Terraform
- [ ] –¢–µ—Å—Ç—ã workspaces

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

### –î–æ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏:
- ‚ùå 392 —Å—Ç—Ä–æ–∫–∏ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- ‚ùå –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å workspaces
- ‚ùå –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚ùå –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ü–æ—Å–ª–µ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏:
- ‚úÖ 6 –º–æ–¥—É–ª–µ–π –ø–æ 40-100 —Å—Ç—Ä–æ–∫
- ‚úÖ Reader –æ—Ç–¥–µ–ª—ë–Ω –æ—Ç –∫–æ–º–∞–Ω–¥
- ‚úÖ Workspaces –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏

### Reader

```rust
pub struct TerraformReader {
    eof: bool,
    status: TaskStatus,
    logger: Arc<dyn TaskLogger>,
}

impl Read for TerraformReader {
    fn read(&mut self, buf: &mut [u8]) -> io::Result<usize> {
        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
        // –í–æ–∑–≤—Ä–∞—Ç "yes\n" –∏–ª–∏ "no\n"
    }
}
```

### Commands

```rust
impl TerraformApp {
    async fn plan(
        &mut self,
        args: Vec<String>,
        env_vars: Vec<String>,
    ) -> Result<bool> {
        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        // –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–≤–æ–¥–∞
    }
}
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞—Ç—å Go –º–æ–¥—É–ª–∏** (1 –¥–µ–Ω—å)
2. **–ù–∞—á–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ Rust** (7-10 –¥–Ω–µ–π)
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LocalJob** (1-2 –¥–Ω—è)
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (3-4 –¥–Ω—è)

---

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: Alexander Vashurin  
**–î–∞—Ç–∞**: 2026-02-26  
**–°—Ç–∞—Ç—É—Å**: üìã –ü–õ–ê–ù
